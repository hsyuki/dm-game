<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>Duel Masters Sandbox - Standard Scroll</title>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="start-modal" class="modal-overlay">
        <div class="lobby-content">
            <h1 style="color:#e67e22; margin-top:0;">DUEL LOBBY</h1>
            <div
                style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; margin-bottom:20px; text-align:left;">
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <span>Player 1: </span><b id="p1-status" style="color:#ff4757;">WAITING...</b>
                </div>
                <div style="display:flex; justify-content:space-between;">
                    <span>Player 2: </span><b id="p2-status" style="color:#ff4757;">WAITING...</b>
                </div>
            </div>
            <p style="font-size:14px; color:#aaa;">デッキ選択</p>
            <select id="my-deck-select"
                style="padding:10px; width:220px; margin-bottom:20px; border-radius:5px; background:#333; color:white; border:1px solid #555;"></select>
            <br>
            <button id="ready-btn"
                style="padding:15px 50px; cursor:pointer; background:#27ae60; color:white; border:none; border-radius:6px; font-weight:bold;">準備完了！</button>
            <p id="lobby-msg" style="font-size:12px; color:#666; margin-top:15px;">役割判定中...</p>
        </div>
    </div>

    <div id="deck-viewer-modal" class="modal-overlay" style="display:none;">
        <div class="viewer-content">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2 id="viewer-title" style="margin:0; color:#e67e22;">CARD SEARCH</h2>
                <button id="close-deck-viewer"
                    style="padding:8px 20px; cursor:pointer; background:#444; color:white; border:none; border-radius:4px;">閉じる</button>
            </div>
            <div id="deck-contents"></div>
        </div>
    </div>

    <div id="preview-modal">
        <h3 id="pre-name" style="color:#e67e22;margin:0 0 10px 0; border-bottom:1px solid #444;"></h3>
        <p id="pre-text" style="font-size:13px; line-height:1.5; white-space:pre-wrap; margin:0;"></p>
    </div>

    <div class="game-view">
        <div id="p2-area" class="player-area">
            <div class="zones-container">
                <div class="battle-shield-row">
                    <div id="p2-battle-zone" class="zone"><span class="zone-title">BATTLE ZONE</span></div>
                    <div id="p2-shield-zone" class="zone"><span class="zone-title">SHIELDS</span></div>
                </div>
                <div id="p2-mana-zone" class="zone"><span class="zone-title">MANA ZONE</span></div>
                <div id="p2-hand-zone" class="zone"><span class="zone-title">HAND</span></div>
            </div>
            <div class="side-panel">
                <div id="p2-deck-disp" class="deck-stack">?</div>
                <div id="p2-graveyard" class="graveyard">0</div>
            </div>
        </div>

        <div class="center-bar">
            <button id="untap-btn"
                style="padding:10px 25px; cursor:pointer; background:#2980b9; color:white; border:none; border-radius:5px; font-weight:bold;">自分を全アンタップ</button>
        </div>

        <div id="p1-area" class="player-area">
            <div class="zones-container">
                <div class="battle-shield-row">
                    <div id="p1-battle-zone" class="zone"><span class="zone-title">BATTLE ZONE</span></div>
                    <div id="p1-shield-zone" class="zone"><span class="zone-title">SHIELDS</span></div>
                </div>
                <div id="p1-mana-zone" class="zone"><span class="zone-title">MANA ZONE</span></div>
                <div id="p1-hand-zone" class="zone"><span class="zone-title">HAND</span></div>
            </div>
            <div class="side-panel">
                <div id="p1-graveyard" class="graveyard" title="墓地を見る">0</div>
                <div id="p1-deck-disp" class="deck-stack" draggable="true" title="クリックでドロー / ドラッグでトップ移動">0</div>
            </div>
        </div>
    </div>

    <script type="module" src="main.js"></script>

    <div id="deck-context-menu" class="context-menu">
        <ul>
            <li id="deck-menu-draw">1枚引く</li>
            <li id="deck-menu-boost">マナゾーンに置く</li>
            <li id="deck-menu-to-battlezone">バトルゾーンに出す</li>
            <li id="deck-menu-to-graveyard">墓地に置く</li>
            <li id="deck-menu-view-top">山札の上を見る</li>
            <li id="deck-menu-view-top-public">公開して山札の上を見る</li>
            <li id="deck-menu-search">山札を見る</li>
        </ul>
    </div>

    <div id="card-viewer-context-menu" class="context-menu">
        <ul>
            <li id="viewer-menu-hand">手札に加える</li>
            <li id="viewer-menu-battlezone">バトルゾーンに出す</li>
            <li id="viewer-menu-mana">マナゾーンに置く</li>
            <li id="viewer-menu-graveyard">墓地に置く</li>
            <li id="viewer-menu-discard" style="display:none;">捨てさせる</li>
        </ul>
    </div>

    <div id="opponent-hand-context-menu" class="context-menu">
        <ul>
            <li id="opp-menu-random-discard">ランダムに1枚捨てさせる</li>
            <li id="opp-menu-view-hand">手札を見て捨てさせる</li>
        </ul>
    </div>

    <div id="opponent-deck-context-menu" class="context-menu">
        <ul>
            <li id="opp-menu-view-deck">山札を見る</li>
        </ul>
    </div>
</body>

</html>